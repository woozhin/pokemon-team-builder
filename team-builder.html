<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌåÄ ÎπåÎçî - PocketChoice</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }
        
        /* Animated background pokeballs */
        .pokeball-bg {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
            opacity: 0.1;
            top: 0;
            left: 0;
        }
        
        .pokeball {
            position: absolute;
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
        }
        
        .pokeball::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 5px;
            background: #333;
            transform: translateY(-50%);
        }
        
        .pokeball::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 15px;
            height: 15px;
            background: white;
            border: 3px solid #333;
            border-radius: 50%;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-50px) rotate(180deg); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo {
            max-width: 800px;
            width: 90%;
            margin: 0 auto 20px;
            display: block;
            filter: drop-shadow(0 10px 30px rgba(42, 117, 187, 0.4));
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .back-btn {
            background: white;
            color: #667eea;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* Team Slots */
        .team-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .team-section h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .team-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .team-slot {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            border: 3px dashed #ccc;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .team-slot:hover {
            transform: scale(1.05);
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }
        
        .team-slot.filled {
            background: white;
            border: 3px solid #667eea;
        }
        
        .team-slot img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }
        
        .team-slot .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ff5252;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            line-height: 1;
        }
        
        .team-slot .pokemon-name {
            position: absolute;
            bottom: 5px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 12px;
            font-weight: 700;
            color: #333;
            background: rgba(255, 255, 255, 0.9);
            padding: 3px;
        }
        
        .team-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .team-action-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .save-team-btn {
            background: linear-gradient(135deg, #4ECDC4 0%, #44A08D 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.3);
        }
        
        .save-team-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(78, 205, 196, 0.5);
        }
        
        .save-team-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .load-team-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .load-team-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(102, 126, 234, 0.5);
        }
        
        .team-analysis {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .team-analysis h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .type-coverage {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* Save/Load Modal */
        .save-modal-content {
            max-width: 500px;
        }
        
        .save-modal-content input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 20px;
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .save-modal-content input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .save-modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }
        
        .save-modal-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .save-modal-btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .save-modal-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .save-modal-btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .save-modal-btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .saved-teams-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .saved-team-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .saved-team-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        .saved-team-info {
            flex: 1;
        }
        
        .saved-team-name {
            font-weight: 700;
            font-size: 18px;
            color: #333;
            margin-bottom: 5px;
        }
        
        .saved-team-date {
            font-size: 12px;
            color: #999;
        }
        
        .saved-team-pokemon {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }
        
        .saved-team-pokemon img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }
        
        .saved-team-actions {
            display: flex;
            gap: 10px;
        }
        
        .delete-team-btn {
            background: #ff5252;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .delete-team-btn:hover {
            background: #ff1744;
            transform: scale(1.05);
        }
        
        .type-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
        }
        
        .weakness-list, .resistance-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        /* Pokemon List */
        .pokemon-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .pokemon-section h2 {
            font-size: 28px;
            color: #333;
            margin-bottom: 20px;
        }
        
        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .type-filter {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .type-filter-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            background: white;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .type-filter-btn.active {
            color: white;
            border-color: transparent;
        }
        
        .pokemon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            max-height: 600px;
            overflow-y: auto;
            padding: 10px;
        }
        
        .pokemon-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pokemon-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }
        
        .pokemon-card img {
            width: 100%;
            height: 100px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        
        .pokemon-card .name {
            font-size: 14px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .pokemon-card .number {
            font-size: 12px;
            color: #999;
        }
        
        .pokemon-types {
            display: flex;
            gap: 5px;
            justify-content: center;
            margin-top: 8px;
        }
        
        .pokemon-types .type-badge {
            font-size: 10px;
            padding: 3px 8px;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #ff5252;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 20px;
            cursor: pointer;
            font-weight: 700;
        }
        
        .pokemon-detail {
            text-align: center;
        }
        
        .pokemon-detail img {
            width: 200px;
            height: 200px;
            object-fit: contain;
            margin: 20px auto;
        }
        
        .pokemon-detail h2 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .stats-section {
            margin: 20px 0;
            text-align: left;
        }
        
        .stats-section h3 {
            color: #333;
            margin-bottom: 15px;
        }
        
        .stat-bar {
            margin-bottom: 10px;
        }
        
        .stat-bar-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .stat-bar-fill {
            height: 25px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            padding: 0 10px;
            color: white;
            font-weight: 700;
        }
        
        /* Hexagon Stat Chart */
        .hexagon-chart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 30px 0;
            padding: 20px;
        }
        
        .hexagon-chart {
            position: relative;
            width: 350px;
            height: 350px;
            margin: 0 auto;
        }
        
        .hexagon-chart svg {
            width: 100%;
            height: 100%;
        }
        
        .hexagon-grid {
            fill: none;
            stroke: #e0e0e0;
            stroke-width: 1;
        }
        
        .hexagon-fill {
            fill: rgba(102, 126, 234, 0.3);
            stroke: #667eea;
            stroke-width: 2;
            transition: all 0.3s;
        }
        
        .hexagon-point {
            fill: #667eea;
            r: 4;
        }
        
        .hexagon-label {
            font-size: 12px;
            font-weight: 700;
            fill: #333;
            text-anchor: middle;
        }
        
        .hexagon-value {
            font-size: 11px;
            fill: #667eea;
            font-weight: 700;
            text-anchor: middle;
        }
        
        .moves-section, .items-section {
            margin: 20px 0;
            text-align: left;
        }
        
        .moves-grid, .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }
        
        .move-item, .item-item {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }
        
        .add-to-team-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .add-to-team-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 50px;
            color: white;
            font-size: 24px;
        }
        
        /* Type Colors */
        .type-normal { background: #A8A878; }
        .type-fighting { background: #C03028; }
        .type-flying { background: #A890F0; }
        .type-poison { background: #A040A0; }
        .type-ground { background: #E0C068; }
        .type-rock { background: #B8A038; }
        .type-bug { background: #A8B820; }
        .type-ghost { background: #705898; }
        .type-steel { background: #B8B8D0; }
        .type-fire { background: #F08030; }
        .type-water { background: #6890F0; }
        .type-grass { background: #78C850; }
        .type-electric { background: #F8D030; }
        .type-psychic { background: #F85888; }
        .type-ice { background: #98D8D8; }
        .type-dragon { background: #7038F8; }
        .type-dark { background: #705848; }
        .type-fairy { background: #EE99AC; }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #764ba2;
        }
    </style>
</head>
<body>
    <!-- Animated background pokeballs -->
    <div class="pokeball-bg">
        <div class="pokeball" style="left: 10%; top: 20%; animation-delay: 0s;"></div>
        <div class="pokeball" style="left: 80%; top: 30%; animation-delay: 2s;"></div>
        <div class="pokeball" style="left: 50%; top: 60%; animation-delay: 4s;"></div>
        <div class="pokeball" style="left: 20%; top: 70%; animation-delay: 6s;"></div>
        <div class="pokeball" style="left: 90%; top: 80%; animation-delay: 8s;"></div>
    </div>
    
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Type colors mapping
        const TYPE_COLORS = {
            'Normal': 'type-normal', 'Fighting': 'type-fighting', 'Flying': 'type-flying',
            'Poison': 'type-poison', 'Ground': 'type-ground', 'Rock': 'type-rock',
            'Bug': 'type-bug', 'Ghost': 'type-ghost', 'Steel': 'type-steel',
            'Fire': 'type-fire', 'Water': 'type-water', 'Grass': 'type-grass',
            'Electric': 'type-electric', 'Psychic': 'type-psychic', 'Ice': 'type-ice',
            'Dragon': 'type-dragon', 'Dark': 'type-dark', 'Fairy': 'type-fairy'
        };

        // Korean type names
        const TYPE_NAMES_KR = {
            'Normal': 'ÎÖ∏Îßê', 'Fighting': 'Í≤©Ìà¨', 'Flying': 'ÎπÑÌñâ',
            'Poison': 'ÎèÖ', 'Ground': 'ÎïÖ', 'Rock': 'Î∞îÏúÑ',
            'Bug': 'Î≤åÎ†à', 'Ghost': 'Í≥†Ïä§Ìä∏', 'Steel': 'Í∞ïÏ≤†',
            'Fire': 'Î∂àÍΩÉ', 'Water': 'Î¨º', 'Grass': 'ÌíÄ',
            'Electric': 'Ï†ÑÍ∏∞', 'Psychic': 'ÏóêÏä§Ìçº', 'Ice': 'ÏñºÏùå',
            'Dragon': 'ÎìúÎûòÍ≥§', 'Dark': 'ÏïÖ', 'Fairy': 'ÌéòÏñ¥Î¶¨'
        };

        function TeamBuilder() {
            const [team, setTeam] = useState([null, null, null, null, null, null]);
            const [pokemonList, setPokemonList] = useState([]);
            const [rankingData, setRankingData] = useState([]);
            const [typeChart, setTypeChart] = useState([]);
            const [pokemonDetails, setPokemonDetails] = useState(null);
            const [movesData, setMovesData] = useState([]);
            const [itemsData, setItemsData] = useState([]);
            const [abilitiesData, setAbilitiesData] = useState([]);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedTypes, setSelectedTypes] = useState([]); // Î∞∞Ïó¥Î°ú Î≥ÄÍ≤Ω
            const [selectedCategory, setSelectedCategory] = useState(null); // 'recommended', 'favorites', null
            const [favorites, setFavorites] = useState([]); // Ï¶êÍ≤®Ï∞æÍ∏∞ Ìè¨ÏºìÎ™¨ Î≤àÌò∏ Î∞∞Ïó¥
            const [selectedPokemon, setSelectedPokemon] = useState(null);
            const [currentPage, setCurrentPage] = useState(1);
            const itemsPerPage = 30; // ÌéòÏù¥ÏßÄÎãπ ÌëúÏãúÌï† Ìè¨ÏºìÎ™¨ Ïàò
            const [savedTeams, setSavedTeams] = useState([]);
            const [showSaveModal, setShowSaveModal] = useState(false);
            const [showLoadModal, setShowLoadModal] = useState(false);
            const [teamName, setTeamName] = useState('');
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);

            useEffect(() => {
                loadData();
                loadSavedTeams();
            }, []);
            
            // ÎèÑÍ∞êÏóêÏÑú Ï¶êÍ≤®Ï∞æÍ∏∞ Î∂àÎü¨Ïò§Í∏∞ (Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú Ï≤¥ÌÅ¨)
            useEffect(() => {
                const loadFavorites = () => {
                    const savedFavorites = localStorage.getItem('pokedexFavorites');
                    if (savedFavorites) {
                        try {
                            const parsed = JSON.parse(savedFavorites);
                            setFavorites(parsed);
                        } catch (e) {
                            console.warn('Ï¶êÍ≤®Ï∞æÍ∏∞ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®:', e);
                        }
                    }
                };
                
                loadFavorites();
                // Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú Ï¶êÍ≤®Ï∞æÍ∏∞ ÏóÖÎç∞Ïù¥Ìä∏ Ï≤¥ÌÅ¨ (5Ï¥àÎßàÎã§)
                const interval = setInterval(loadFavorites, 5000);
                return () => clearInterval(interval);
            }, []);
            
            // Ï†ÄÏû•Îêú ÌåÄ Î™©Î°ù Î∂àÎü¨Ïò§Í∏∞
            const loadSavedTeams = () => {
                try {
                    const saved = localStorage.getItem('savedTeams');
                    if (saved) {
                        setSavedTeams(JSON.parse(saved));
                    }
                } catch (e) {
                    console.warn('Ï†ÄÏû•Îêú ÌåÄ Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®:', e);
                }
            };
            
            // ÌåÄ Ï†ÄÏû•
            const saveTeam = () => {
                if (team.filter(Boolean).length === 0) {
                    alert('ÌåÄÏóê Ìè¨ÏºìÎ™¨Ïù¥ ÏóÜÏäµÎãàÎã§!');
                    return;
                }
                if (!teamName.trim()) {
                    alert('ÌåÄ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
                    return;
                }
                
                const newTeam = {
                    id: Date.now(),
                    name: teamName.trim(),
                    team: team.filter(Boolean),
                    date: new Date().toLocaleString('ko-KR')
                };
                
                const updatedTeams = [...savedTeams, newTeam];
                setSavedTeams(updatedTeams);
                localStorage.setItem('savedTeams', JSON.stringify(updatedTeams));
                setShowSaveModal(false);
                setTeamName('');
                alert('ÌåÄÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§!');
            };
            
            // Ï†ÄÏû•Îêú ÌåÄ Î∂àÎü¨Ïò§Í∏∞
            const loadTeam = (savedTeam) => {
                const loadedTeam = [...team];
                savedTeam.team.forEach((pokemon, index) => {
                    if (index < 6) {
                        loadedTeam[index] = pokemon;
                    }
                });
                // ÎÇòÎ®∏ÏßÄ Ïä¨Î°ØÏùÄ nullÎ°ú
                for (let i = savedTeam.team.length; i < 6; i++) {
                    loadedTeam[i] = null;
                }
                setTeam(loadedTeam);
                setShowLoadModal(false);
            };
            
            // Ï†ÄÏû•Îêú ÌåÄ ÏÇ≠Ï†ú
            const deleteTeam = (teamId, e) => {
                e.stopPropagation();
                if (confirm('Ï†ïÎßê Ïù¥ ÌåÄÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                    const updatedTeams = savedTeams.filter(t => t.id !== teamId);
                    setSavedTeams(updatedTeams);
                    localStorage.setItem('savedTeams', JSON.stringify(updatedTeams));
                }
            };

            // Ìè¨ÏºìÎ™¨ Îç∞Ïù¥ÌÑ∞Í∞Ä Î°úÎìúÎêú ÌõÑ Ï∂îÏ≤ú ÌåÄ Ï†ÅÏö©
            useEffect(() => {
                if (pokemonList.length > 0) {
                    const recommendedTeam = localStorage.getItem('recommendedTeam');
                    if (recommendedTeam) {
                        try {
                            const teamData = JSON.parse(recommendedTeam);
                            if (Array.isArray(teamData) && teamData.length > 0) {
                                // Ìè¨ÏºìÎ™¨ Î≤àÌò∏Î°ú Ïã§Ï†ú Ìè¨ÏºìÎ™¨ Îç∞Ïù¥ÌÑ∞ Ï∞æÍ∏∞
                                const loadedTeam = teamData.slice(0, 6).map(pokemonData => {
                                    if (typeof pokemonData === 'object' && pokemonData.num) {
                                        // Ïù¥ÎØ∏ Ìè¨ÏºìÎ™¨ Í∞ùÏ≤¥Ïù∏ Í≤ΩÏö∞
                                        return pokemonData;
                                    } else if (typeof pokemonData === 'number') {
                                        // Î≤àÌò∏Îßå ÏûàÎäî Í≤ΩÏö∞
                                        return pokemonList.find(p => p.num === pokemonData);
                                    }
                                    return null;
                                }).filter(Boolean);

                                if (loadedTeam.length > 0) {
                                    const newTeam = [...team];
                                    loadedTeam.forEach((pokemon, index) => {
                                        if (index < 6 && pokemon) {
                                            newTeam[index] = pokemon;
                                        }
                                    });
                                    setTeam(newTeam);
                                    // ÏÇ¨Ïö© ÌõÑ ÏÇ≠Ï†ú
                                    localStorage.removeItem('recommendedTeam');
                                }
                            }
                        } catch (e) {
                            console.warn('Ï∂îÏ≤ú ÌåÄ Î°úÎìú Ïã§Ìå®:', e);
                        }
                    }
                }
            }, [pokemonList]);

            const loadData = async () => {
                try {
                    console.log('Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏãúÏûë...');
                    
                    // Load Pokedex
                    const pokedexRes = await fetch('data/pokemoem_pokedex.json');
                    if (!pokedexRes.ok) throw new Error('Pokedex ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                    const pokedexData = await pokedexRes.json();
                    console.log('Ìè¨ÏºìÎ™¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£å:', pokedexData.length, 'ÎßàÎ¶¨');
                    setPokemonList(pokedexData);

                    // Load Ranking
                    try {
                        const rankingRes = await fetch('data/pokemoem_pokemon_ranking_sc.json');
                        if (!rankingRes.ok) throw new Error('Îû≠ÌÇπ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        const rankingJson = await rankingRes.json();
                        setRankingData(rankingJson[0]?.data || []);
                        console.log('Îû≠ÌÇπ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£å:', rankingJson[0]?.data?.length || 0, 'Í∞ú');
                    } catch (e) {
                        console.warn('Îû≠ÌÇπ Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®, Í≥ÑÏÜç ÏßÑÌñâÌï©ÎãàÎã§:', e);
                        setRankingData([]);
                    }

                    // Load Type Chart
                    try {
                        const typeRes = await fetch('data/pokemoem_typechart.json');
                        if (!typeRes.ok) throw new Error('ÌÉÄÏûÖ Ï∞®Ìä∏ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        const typeData = await typeRes.json();
                        setTypeChart(typeData);
                        console.log('ÌÉÄÏûÖ Ï∞®Ìä∏ Î°úÎî© ÏôÑÎ£å');
                    } catch (e) {
                        console.warn('ÌÉÄÏûÖ Ï∞®Ìä∏ Î°úÎî© Ïã§Ìå®, Í≥ÑÏÜç ÏßÑÌñâÌï©ÎãàÎã§:', e);
                        setTypeChart([]);
                    }

                    // Load Pokemon Details (for recommended moves and items)
                    try {
                        const detailsRes = await fetch('data/pokemoem_pokemon_details_sc.json');
                        if (!detailsRes.ok) throw new Error('Ìè¨ÏºìÎ™¨ ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        const detailsJson = await detailsRes.json();
                        setPokemonDetails(detailsJson[0]?.data || null);
                        console.log('Ìè¨ÏºìÎ™¨ ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Î°úÎî© ÏôÑÎ£å');
                    } catch (e) {
                        console.warn('Ìè¨ÏºìÎ™¨ ÏÉÅÏÑ∏ Ï†ïÎ≥¥ Î°úÎî© Ïã§Ìå®, Í≥ÑÏÜç ÏßÑÌñâÌï©ÎãàÎã§:', e);
                        setPokemonDetails(null);
                    }

                    // Load Moves
                    try {
                        const movesRes = await fetch('data/pokemoem_moves.json');
                        if (!movesRes.ok) throw new Error('Í∏∞Ïà† ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        const movesJson = await movesRes.json();
                        setMovesData(movesJson);
                        console.log('Í∏∞Ïà† Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£å:', movesJson.length, 'Í∞ú');
                    } catch (e) {
                        console.warn('Í∏∞Ïà† Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®, Í≥ÑÏÜç ÏßÑÌñâÌï©ÎãàÎã§:', e);
                        setMovesData([]);
                    }

                    // Load Items
                    try {
                        const itemsRes = await fetch('data/pokemoem_items.json');
                        if (!itemsRes.ok) throw new Error('ÎèÑÍµ¨ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        const itemsJson = await itemsRes.json();
                        setItemsData(itemsJson);
                        console.log('ÎèÑÍµ¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£å:', itemsJson.length, 'Í∞ú');
                    } catch (e) {
                        console.warn('ÎèÑÍµ¨ Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®, Í≥ÑÏÜç ÏßÑÌñâÌï©ÎãàÎã§:', e);
                        setItemsData([]);
                    }

                    // Load Abilities
                    try {
                        const abilitiesRes = await fetch('data/pokemoem_abilities.json');
                        if (!abilitiesRes.ok) throw new Error('ÌäπÏÑ± ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
                        const abilitiesJson = await abilitiesRes.json();
                        setAbilitiesData(abilitiesJson);
                        console.log('ÌäπÏÑ± Îç∞Ïù¥ÌÑ∞ Î°úÎî© ÏôÑÎ£å:', abilitiesJson.length, 'Í∞ú');
                    } catch (e) {
                        console.warn('ÌäπÏÑ± Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®, Í≥ÑÏÜç ÏßÑÌñâÌï©ÎãàÎã§:', e);
                        setAbilitiesData([]);
                    }

                    setLoading(false);
                } catch (error) {
                    console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïã§Ìå®:', error);
                    setError(error.message);
                    setLoading(false);
                }
            };

            const addToTeam = (pokemon) => {
                const emptyIndex = team.findIndex(slot => slot === null);
                if (emptyIndex !== -1) {
                    const newTeam = [...team];
                    newTeam[emptyIndex] = pokemon;
                    setTeam(newTeam);
                    setSelectedPokemon(null);
                    setSearchTerm(''); // Í≤ÄÏÉâÏñ¥ Ï¥àÍ∏∞Ìôî
                } else {
                    alert('ÌåÄÏù¥ Í∞ÄÎìù Ï∞ºÏäµÎãàÎã§!');
                }
            };

            const removeFromTeam = (index) => {
                const newTeam = [...team];
                newTeam[index] = null;
                setTeam(newTeam);
            };

            const getPokemonImageUrl = (pokemon) => {
                if (!pokemon) return '';
                
                const num = pokemon.num;
                const forme = pokemon.forme || 0;
                const name = (pokemon.nameko || pokemon.name || '').toLowerCase();
                
                // Î¶¨ÏûêÎ™Ω X, Y Íµ¨Î∂Ñ
                if (num === 6) {
                    if (name.includes('mega-x') || name.includes('Î©îÍ∞Äx') || forme === 1) {
                        return `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/10033.png`;
                    } else if (name.includes('mega-y') || name.includes('Î©îÍ∞Äy') || forme === 2) {
                        return `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/10034.png`;
                    }
                }
                
                // FormÏù¥ ÏûàÏúºÎ©¥ ÌäπÎ≥ÑÌïú Ïù¥ÎØ∏ÏßÄ URL ÏÇ¨Ïö©
                if (forme && forme > 0) {
                    // ÌäπÏ†ï formeÏóê ÎåÄÌïú Ïù¥ÎØ∏ÏßÄ URL ÏÉùÏÑ±
                    return `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${num}.png`;
                }
                
                return `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${num}.png`;
            };

            // Ï∂îÏ≤ú Ìè¨ÏºìÎ™¨ Í≥ÑÏÇ∞
            const getRecommendedPokemon = () => {
                if (!pokemonDetails || pokemonList.length === 0) {
                    return [];
                }
                
                const currentTeam = team.filter(Boolean);
                const teamNums = currentTeam.map(p => p.num);
                
                if (currentTeam.length === 0) {
                    // ÌåÄÏù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥ TOP 30 Ïù∏Í∏∞ Ìè¨ÏºìÎ™¨
                    if (rankingData && rankingData.length > 0) {
                        return rankingData.slice(0, 50).map(rank => {
                            return pokemonList.find(p => p.num === rank.id);
                        }).filter(Boolean).slice(0, 30);
                    }
                    return pokemonList.slice(0, 30);
                }
                
                // ÎßàÏßÄÎßâÏúºÎ°ú Ï∂îÍ∞ÄÎêú Ìè¨ÏºìÎ™¨ Í∏∞Ï§ÄÏúºÎ°ú Ï∂îÏ≤ú
                const lastPokemon = currentTeam[currentTeam.length - 1];
                const pokemonKey = lastPokemon.num?.toString();
                const pokemonData = pokemonDetails[pokemonKey];
                
                if (pokemonData && pokemonData['0'] && pokemonData['0'].temoti && pokemonData['0'].temoti.pokemon) {
                    const partners = pokemonData['0'].temoti.pokemon.slice(0, 50);
                    const recommended = partners.map(partner => {
                        return pokemonList.find(p => p.num === partner.id);
                    }).filter(Boolean);
                    
                    // Ïù¥ÎØ∏ ÌåÄÏóê ÏûàÎäî Ìè¨ÏºìÎ™¨ Ï†úÏô∏
                    return recommended.filter(p => !teamNums.includes(p.num)).slice(0, 30);
                }
                
                return [];
            };
            
            // Ï¶êÍ≤®Ï∞æÍ∏∞ Ìè¨ÏºìÎ™¨ Í∞ÄÏ†∏Ïò§Í∏∞
            const getFavoritePokemon = () => {
                if (favorites.length === 0) return [];
                return getUniquePokemonByName(
                    favorites.map(num => pokemonList.find(p => p.num === num)).filter(Boolean)
                );
            };

            // Ìè¨ÏºìÎ™¨ Ïù¥Î¶ÑÏúºÎ°ú Í∑∏Î£πÌôîÌïòÍ≥† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Í≤ÉÎßå ÏÑ†ÌÉù
            const getUniquePokemonByName = (pokemonList) => {
                if (!pokemonList || pokemonList.length === 0) return [];
                
                const nameMap = new Map();
                
                pokemonList.forEach(pokemon => {
                    if (!pokemon) return;
                    
                    // Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÎäî Ìè¨ÏºìÎ™¨ÏùÄ Ï†úÏô∏ (abilitiesÎÇò basestatsÍ∞Ä ÏûàÏñ¥Ïïº Ìï®)
                    const hasData = pokemon.abilities || pokemon.basestats;
                    if (!hasData) return;
                    
                    // Ïù¥Î¶ÑÏóêÏÑú ÌäπÏàò ÌòïÌÉú ÌëúÏãú Ï†úÍ±∞ (Ïòà: "ÌîºÏπ¥Ï∏Ñ - ÏΩîÏä§ÌîÑÎ†à" -> "ÌîºÏπ¥Ï∏Ñ")
                    let name = pokemon.nameko || pokemon.name;
                    if (!name) return;
                    
                    // "-" Ïù¥ÌõÑÏùò ÌÖçÏä§Ìä∏ Ï†úÍ±∞ (ÌäπÏàò ÌòïÌÉú Ï†úÍ±∞)
                    const baseName = name.split(' - ')[0].split('-')[0].trim();
                    const key = baseName.toLowerCase();
                    
                    // Ïù¥ÎØ∏ Í∞ôÏùÄ Ïù¥Î¶ÑÏù¥ ÏûàÏúºÎ©¥, Îç∞Ïù¥ÌÑ∞Í∞Ä Îçî ÎßéÏùÄ Í≤ÉÏùÑ ÏÑ†ÌÉù
                    if (!nameMap.has(key)) {
                        nameMap.set(key, pokemon);
                    } else {
                        const existing = nameMap.get(key);
                        const existingHasData = existing.abilities || existing.basestats;
                        const currentHasData = pokemon.abilities || pokemon.basestats;
                        
                        // Îëò Îã§ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥
                        if (currentHasData && existingHasData) {
                            // formeÏù¥ 0Ïù¥Í±∞ÎÇò nullÏù∏ Í≤ÉÏùÑ Ïö∞ÏÑ† (Í∏∞Î≥∏ ÌòïÌÉú)
                            const existingForme = existing.forme || 0;
                            const currentForme = pokemon.forme || 0;
                            
                            if (currentForme === 0 && existingForme !== 0) {
                                nameMap.set(key, pokemon);
                            } else if (existingForme === 0 && currentForme !== 0) {
                                // existingÏù¥ Í∏∞Î≥∏ ÌòïÌÉúÎ©¥ Ïú†ÏßÄ
                            } else {
                                // Îëò Îã§ Í∞ôÏùÄ ÌòïÌÉúÎ©¥ Îçî ÎßéÏùÄ Îç∞Ïù¥ÌÑ∞Î•º Í∞ÄÏßÑ Í≤É
                                const existingDataCount = Object.keys(existing).length;
                                const currentDataCount = Object.keys(pokemon).length;
                                if (currentDataCount > existingDataCount) {
                                    nameMap.set(key, pokemon);
                                }
                            }
                        } else if (currentHasData && !existingHasData) {
                            nameMap.set(key, pokemon);
                        }
                    }
                });
                
                return Array.from(nameMap.values());
            };

            const filteredPokemon = getUniquePokemonByName(pokemonList).filter(pokemon => {
                if (!pokemon) return false;
                
                const matchesSearch = pokemon.nameko?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    pokemon.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    pokemon.num?.toString().includes(searchTerm);
                
                // Ïó¨Îü¨ ÌÉÄÏûÖ ÏÑ†ÌÉù Ïãú AND Ï°∞Í±¥ (Î™®Îì† ÏÑ†ÌÉùÌïú ÌÉÄÏûÖÏùÑ Ìè¨Ìï®Ìï¥Ïïº Ìï®)
                let matchesType = true;
                if (selectedTypes.length > 0) {
                    const pokemonTypes = pokemon.types || [];
                    matchesType = selectedTypes.every(selectedType => pokemonTypes.includes(selectedType));
                }
                
                return matchesSearch && matchesType;
            });

            // Get top 30 popular Pokemon (Ï§ëÎ≥µ Ï†úÍ±∞)
            const popularPokemon = rankingData && rankingData.length > 0 
                ? getUniquePokemonByName(
                    rankingData.slice(0, 50).map(rank => {
                        return pokemonList.find(p => p.num === rank.id);
                    }).filter(Boolean)
                ).slice(0, 30)
                : [];

            // Ï∂îÏ≤ú Ìè¨ÏºìÎ™¨ (Ï§ëÎ≥µ Ï†úÍ±∞)
            const recommendedPokemon = getUniquePokemonByName(getRecommendedPokemon());
            
            // Ï¶êÍ≤®Ï∞æÍ∏∞ Ìè¨ÏºìÎ™¨
            const favoritePokemon = getFavoritePokemon();
            
            // Ïù¥ÎØ∏ ÌåÄÏóê ÏûàÎäî Ìè¨ÏºìÎ™¨ Î≤àÌò∏
            const teamNums = team.filter(Boolean).map(p => p.num);

            // ÌëúÏãúÌï† Ìè¨ÏºìÎ™¨ Í≤∞Ï†ï
            let displayPokemon = [];
            if (searchTerm || selectedTypes.length > 0) {
                // Í≤ÄÏÉâÏñ¥Í∞Ä ÏûàÍ±∞ÎÇò ÌÉÄÏûÖ ÌïÑÌÑ∞Í∞Ä ÏÑ†ÌÉùÎêú Í≤ΩÏö∞ ÌïÑÌÑ∞Îêú Ìè¨ÏºìÎ™¨
                displayPokemon = filteredPokemon;
            } else if (selectedCategory === 'recommended') {
                // Ï∂îÏ≤ú Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù Ïãú
                displayPokemon = recommendedPokemon.length > 0 ? recommendedPokemon : popularPokemon;
            } else if (selectedCategory === 'favorites') {
                // Ï¶êÍ≤®Ï∞æÍ∏∞ Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù Ïãú
                displayPokemon = favoritePokemon;
            } else {
                // Í∏∞Î≥∏: Ïù∏Í∏∞ Ìè¨ÏºìÎ™¨ (ÌåÄÏù¥ ÎπÑÏñ¥ÏûàÏùÑ ÎïåÎßå)
                displayPokemon = popularPokemon.length > 0 ? popularPokemon : getUniquePokemonByName(pokemonList).slice(0, 30);
            }
            
            // Ïù¥ÎØ∏ ÌåÄÏóê ÏûàÎäî Ìè¨ÏºìÎ™¨ Ï†úÏô∏ (Ï§ëÎ≥µ ÏÑ†ÌÉù Î∞©ÏßÄ)
            displayPokemon = displayPokemon.filter(p => !teamNums.includes(p.num));
            
            // ÏµúÏ¢Ö Ï§ëÎ≥µ Ï†úÍ±∞ (Ïù¥Î¶Ñ Í∏∞Ï§Ä) - Ï∂îÍ∞Ä ÏïàÏ†ÑÏû•Ïπò
            const finalDisplayPokemon = getUniquePokemonByName(displayPokemon);
            
            // ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò Í≥ÑÏÇ∞
            const totalPages = Math.ceil(finalDisplayPokemon.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedPokemon = finalDisplayPokemon.slice(startIndex, endIndex);
            
            // ÌÉÄÏûÖ ÌïÑÌÑ∞ ÎòêÎäî Ïπ¥ÌÖåÍ≥†Î¶¨ Î≥ÄÍ≤Ω Ïãú ÌéòÏù¥ÏßÄÎ•º 1Î°ú Î¶¨ÏÖã
            useEffect(() => {
                setCurrentPage(1);
            }, [selectedTypes, searchTerm, selectedCategory]);

            if (loading) {
                return <div className="loading">Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...</div>;
            }

            if (error) {
                return (
                    <div className="loading">
                        <h2>‚ö†Ô∏è Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ïò§Î•ò</h2>
                        <p>{error}</p>
                        <p style={{marginTop: '20px', fontSize: '16px'}}>
                            ÌååÏùºÎ™ÖÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî:<br/>
                            - data/pokemoem_pokedex.json<br/>
                            - data/pokemoem_pokemon_ranking_sc.json<br/>
                            - data/pokemoem_typechart.json
                        </p>
                        <button 
                            className="back-btn" 
                            onClick={() => window.location.reload()}
                            style={{marginTop: '20px'}}
                        >
                            Îã§Ïãú ÏãúÎèÑ
                        </button>
                    </div>
                );
            }

            return (
                <div className="container">
                    <div className="header">
                        <img src="mainbanner.png" alt="PocketChoice" className="logo" />
                        <button className="back-btn" onClick={() => window.location.href = 'pocketchoice-homepage.html'}>
                            ‚Üê ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                        </button>
                    </div>

                    {/* Team Section */}
                    <div className="team-section">
                        <h2>üéÆ ÎÇ¥ ÌåÄ Íµ¨ÏÑ± ({team.filter(Boolean).length}/6)</h2>
                        <div className="team-slots">
                            {team.map((pokemon, index) => (
                                <div 
                                    key={index} 
                                    className={`team-slot ${pokemon ? 'filled' : ''}`}
                                >
                                    {pokemon ? (
                                        <>
                                            <img 
                                                src={getPokemonImageUrl(pokemon)} 
                                                alt={pokemon.nameko || pokemon.name}
                                                onError={(e) => {
                                                    e.target.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.num}.png`;
                                                }}
                                            />
                                            <span className="pokemon-name">{pokemon.nameko || pokemon.name}</span>
                                            <button 
                                                className="remove-btn"
                                                onClick={() => removeFromTeam(index)}
                                            >√ó</button>
                                        </>
                                    ) : (
                                        <span style={{color: '#999', fontSize: '14px'}}>Ìè¨ÏºìÎ™¨ Ï∂îÍ∞Ä</span>
                                    )}
                                </div>
                            ))}
                        </div>

                        {team.filter(Boolean).length > 0 && (
                            <div className="team-analysis">
                                <h3>ÌåÄ ÌÉÄÏûÖ Î∂ÑÏÑù</h3>
                                <div className="type-coverage">
                                    {Array.from(new Set(team.filter(Boolean).flatMap(p => p.types || []))).map(type => (
                                        <span key={type} className={`type-badge ${TYPE_COLORS[type]}`}>
                                            {TYPE_NAMES_KR[type] || type}
                                        </span>
                                    ))}
                                </div>
                            </div>
                        )}
                        
                        <div className="team-actions">
                            <button 
                                className="team-action-btn save-team-btn"
                                onClick={() => setShowSaveModal(true)}
                                disabled={team.filter(Boolean).length === 0}
                            >
                                üíæ ÌåÄ Ï†ÄÏû•ÌïòÍ∏∞
                            </button>
                            <button 
                                className="team-action-btn load-team-btn"
                                onClick={() => setShowLoadModal(true)}
                            >
                                üìÇ Ï†ÄÏû•Îêú ÌåÄ Î∂àÎü¨Ïò§Í∏∞
                            </button>
                        </div>
                    </div>

                    {/* Pokemon Selection Section */}
                    <div className="pokemon-section">
                        <h2>üîç Ìè¨ÏºìÎ™¨ ÏÑ†ÌÉù</h2>
                        
                        <div className="search-filter">
                            <input 
                                type="text"
                                className="search-input"
                                placeholder="Ìè¨ÏºìÎ™¨ Ïù¥Î¶Ñ ÎòêÎäî Î≤àÌò∏Î°ú Í≤ÄÏÉâ..."
                                value={searchTerm}
                                onChange={(e) => {
                                    setSearchTerm(e.target.value);
                                    setSelectedCategory(null); // Í≤ÄÏÉâ Ïãú Ïπ¥ÌÖåÍ≥†Î¶¨ Ìï¥Ï†ú
                                }}
                            />
                        </div>

                        {/* Ïπ¥ÌÖåÍ≥†Î¶¨ Î≤ÑÌäº */}
                        <div style={{marginBottom: '15px', display: 'flex', gap: '10px', flexWrap: 'wrap'}}>
                            <button
                                className={`category-btn ${selectedCategory === 'recommended' ? 'active' : ''}`}
                                onClick={() => {
                                    setSelectedCategory(selectedCategory === 'recommended' ? null : 'recommended');
                                    setSearchTerm('');
                                    setSelectedTypes([]);
                                }}
                                style={{
                                    padding: '10px 20px',
                                    borderRadius: '25px',
                                    border: '2px solid #667eea',
                                    background: selectedCategory === 'recommended' ? '#667eea' : 'white',
                                    color: selectedCategory === 'recommended' ? 'white' : '#667eea',
                                    fontWeight: '700',
                                    cursor: 'pointer',
                                    fontSize: '14px',
                                    transition: 'all 0.3s'
                                }}
                            >
                                ‚≠ê Ï∂îÏ≤ú
                            </button>
                            <button
                                className={`category-btn ${selectedCategory === 'favorites' ? 'active' : ''}`}
                                onClick={() => {
                                    setSelectedCategory(selectedCategory === 'favorites' ? null : 'favorites');
                                    setSearchTerm('');
                                    setSelectedTypes([]);
                                }}
                                style={{
                                    padding: '10px 20px',
                                    borderRadius: '25px',
                                    border: '2px solid #FF6B6B',
                                    background: selectedCategory === 'favorites' ? '#FF6B6B' : 'white',
                                    color: selectedCategory === 'favorites' ? 'white' : '#FF6B6B',
                                    fontWeight: '700',
                                    cursor: 'pointer',
                                    fontSize: '14px',
                                    transition: 'all 0.3s'
                                }}
                            >
                                ‚≠ê Ï¶êÍ≤®Ï∞æÍ∏∞
                            </button>
                        </div>

                        <div className="type-filter">
                            {Object.keys(TYPE_NAMES_KR).map(type => {
                                const isSelected = selectedTypes.includes(type);
                                return (
                                    <button
                                        key={type}
                                        className={`type-filter-btn ${TYPE_COLORS[type]} ${isSelected ? 'active' : ''}`}
                                        onClick={() => {
                                            if (isSelected) {
                                                // Ïù¥ÎØ∏ ÏÑ†ÌÉùÎêú ÌÉÄÏûÖÏù¥Î©¥ Ï†úÍ±∞
                                                setSelectedTypes(selectedTypes.filter(t => t !== type));
                                            } else {
                                                // ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ ÌÉÄÏûÖÏù¥Î©¥ Ï∂îÍ∞Ä
                                                setSelectedTypes([...selectedTypes, type]);
                                            }
                                            // ÌÉÄÏûÖ ÌïÑÌÑ∞ ÏÑ†ÌÉù Ïãú Ïπ¥ÌÖåÍ≥†Î¶¨ Ìï¥Ï†ú
                                            setSelectedCategory(null);
                                        }}
                                        style={isSelected ? {} : {background: 'white', color: '#333'}}
                                    >
                                        {TYPE_NAMES_KR[type]}
                                        {isSelected && ' ‚úì'}
                                    </button>
                                );
                            })}
                        </div>

                        {selectedCategory === 'recommended' && !searchTerm && selectedTypes.length === 0 && (
                            <p style={{margin: '15px 0', color: '#666'}}>
                                {team.filter(Boolean).length === 0 
                                    ? 'üí° ÌòÑÏû¨ ÏãúÏ¶å Ïù∏Í∏∞ Ìè¨ÏºìÎ™¨ TOP 30ÏùÑ ÌëúÏãúÌïòÍ≥† ÏûàÏäµÎãàÎã§'
                                    : `üí° ${team.filter(Boolean).length}Î≤àÏß∏ Ìè¨ÏºìÎ™¨ Ï∂îÏ≤ú: ${finalDisplayPokemon.length}ÎßàÎ¶¨Î•º Ï∞æÏïòÏäµÎãàÎã§`
                                }
                            </p>
                        )}
                        
                        {selectedCategory === 'favorites' && !searchTerm && selectedTypes.length === 0 && (
                            <p style={{margin: '15px 0', color: '#666'}}>
                                {favorites.length === 0 
                                    ? 'üí° Ï¶êÍ≤®Ï∞æÍ∏∞Ìïú Ìè¨ÏºìÎ™¨Ïù¥ ÏóÜÏäµÎãàÎã§. ÎèÑÍ∞êÏóêÏÑú Ï¶êÍ≤®Ï∞æÍ∏∞Î•º Ï∂îÍ∞ÄÌï¥Ï£ºÏÑ∏Ïöî.'
                                    : `üí° Ï¶êÍ≤®Ï∞æÍ∏∞Ìïú Ìè¨ÏºìÎ™¨ ${finalDisplayPokemon.length}ÎßàÎ¶¨Î•º ÌëúÏãúÌïòÍ≥† ÏûàÏäµÎãàÎã§`
                                }
                            </p>
                        )}
                        
                        {selectedTypes.length > 0 && (
                            <p style={{margin: '15px 0', color: '#666'}}>
                                üí° {selectedTypes.map(t => TYPE_NAMES_KR[t]).join(', ')} ÌÉÄÏûÖ Ìè¨ÏºìÎ™¨ {finalDisplayPokemon.length}ÎßàÎ¶¨Î•º Ï∞æÏïòÏäµÎãàÎã§
                            </p>
                        )}
                        
                        {!searchTerm && selectedTypes.length === 0 && selectedCategory === null && rankingData.length > 0 && (
                            <p style={{margin: '15px 0', color: '#666'}}>
                                üí° ÌòÑÏû¨ ÏãúÏ¶å Ïù∏Í∏∞ Ìè¨ÏºìÎ™¨ TOP 30ÏùÑ ÌëúÏãúÌïòÍ≥† ÏûàÏäµÎãàÎã§
                            </p>
                        )}

                        <div className="pokemon-grid">
                            {paginatedPokemon.map(pokemon => (
                                <div 
                                    key={`${pokemon.num}-${pokemon.forme || 0}`}
                                    className="pokemon-card"
                                    onClick={() => setSelectedPokemon(pokemon)}
                                >
                                    <img 
                                        src={getPokemonImageUrl(pokemon)} 
                                        alt={pokemon.nameko || pokemon.name}
                                        onError={(e) => {
                                            e.target.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.num}.png`;
                                        }}
                                    />
                                    <div className="name">{pokemon.nameko || pokemon.name}</div>
                                    <div className="number">No. {pokemon.num}</div>
                                    <div className="pokemon-types">
                                        {pokemon.types?.map(type => (
                                            <span key={type} className={`type-badge ${TYPE_COLORS[type]}`}>
                                                {TYPE_NAMES_KR[type] || type}
                                            </span>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>

                        {/* ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò */}
                        {totalPages > 1 && (
                            <div style={{
                                display: 'flex',
                                justifyContent: 'center',
                                alignItems: 'center',
                                gap: '10px',
                                marginTop: '30px',
                                marginBottom: '20px',
                                flexWrap: 'wrap'
                            }}>
                                <button
                                    onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}
                                    disabled={currentPage === 1}
                                    style={{
                                        padding: '10px 20px',
                                        fontSize: '16px',
                                        border: '2px solid #667eea',
                                        borderRadius: '8px',
                                        background: currentPage === 1 ? '#e0e0e0' : 'white',
                                        color: currentPage === 1 ? '#999' : '#667eea',
                                        cursor: currentPage === 1 ? 'not-allowed' : 'pointer',
                                        fontWeight: '700'
                                    }}
                                >
                                    Ïù¥Ï†Ñ
                                </button>
                                
                                {Array.from({ length: totalPages }, (_, i) => i + 1).map(page => {
                                    // ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Ï£ºÎ≥ÄÎßå ÌëúÏãú (ÏµúÎåÄ 7Í∞ú)
                                    if (totalPages <= 7) {
                                        return (
                                            <button
                                                key={page}
                                                onClick={() => setCurrentPage(page)}
                                                style={{
                                                    padding: '10px 15px',
                                                    fontSize: '16px',
                                                    border: '2px solid #667eea',
                                                    borderRadius: '8px',
                                                    background: currentPage === page ? '#667eea' : 'white',
                                                    color: currentPage === page ? 'white' : '#667eea',
                                                    cursor: 'pointer',
                                                    fontWeight: '700',
                                                    minWidth: '45px'
                                                }}
                                            >
                                                {page}
                                            </button>
                                        );
                                    } else {
                                        // ÎßéÏùÄ ÌéòÏù¥ÏßÄÏùº ÎïåÎäî ÌòÑÏû¨ ÌéòÏù¥ÏßÄ Ï£ºÎ≥ÄÎßå ÌëúÏãú
                                        const showPage = 
                                            page === 1 ||
                                            page === totalPages ||
                                            (page >= currentPage - 1 && page <= currentPage + 1);
                                        
                                        if (showPage) {
                                            return (
                                                <button
                                                    key={page}
                                                    onClick={() => setCurrentPage(page)}
                                                    style={{
                                                        padding: '10px 15px',
                                                        fontSize: '16px',
                                                        border: '2px solid #667eea',
                                                        borderRadius: '8px',
                                                        background: currentPage === page ? '#667eea' : 'white',
                                                        color: currentPage === page ? 'white' : '#667eea',
                                                        cursor: 'pointer',
                                                        fontWeight: '700',
                                                        minWidth: '45px'
                                                    }}
                                                >
                                                    {page}
                                                </button>
                                            );
                                        } else if (page === currentPage - 2 || page === currentPage + 2) {
                                            return (
                                                <span key={page} style={{padding: '0 5px', color: '#999'}}>...</span>
                                            );
                                        }
                                        return null;
                                    }
                                })}
                                
                                <button
                                    onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}
                                    disabled={currentPage === totalPages}
                                    style={{
                                        padding: '10px 20px',
                                        fontSize: '16px',
                                        border: '2px solid #667eea',
                                        borderRadius: '8px',
                                        background: currentPage === totalPages ? '#e0e0e0' : 'white',
                                        color: currentPage === totalPages ? '#999' : '#667eea',
                                        cursor: currentPage === totalPages ? 'not-allowed' : 'pointer',
                                        fontWeight: '700'
                                    }}
                                >
                                    Îã§Ïùå
                                </button>
                            </div>
                        )}
                        
                        {totalPages > 1 && (
                            <p style={{
                                textAlign: 'center',
                                color: '#666',
                                fontSize: '14px',
                                marginTop: '10px',
                                marginBottom: '20px'
                            }}>
                                {startIndex + 1} - {Math.min(endIndex, finalDisplayPokemon.length)} / Ï¥ù {finalDisplayPokemon.length}ÎßàÎ¶¨
                            </p>
                        )}

                        {finalDisplayPokemon.length === 0 && (
                            <p style={{textAlign: 'center', padding: '50px', color: '#999'}}>
                                Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§
                            </p>
                        )}
                    </div>

                    {/* Pokemon Detail Modal */}
                    {selectedPokemon && (
                        <PokemonDetailModal 
                            pokemon={selectedPokemon}
                            onClose={() => setSelectedPokemon(null)}
                            onAddToTeam={addToTeam}
                            getPokemonImageUrl={getPokemonImageUrl}
                            pokemonDetails={pokemonDetails}
                            movesData={movesData}
                            itemsData={itemsData}
                            abilitiesData={abilitiesData}
                        />
                    )}
                    
                    {/* Save Team Modal */}
                    {showSaveModal && (
                        <div className="modal" onClick={() => setShowSaveModal(false)}>
                            <div className="modal-content save-modal-content" onClick={(e) => e.stopPropagation()}>
                                <button className="modal-close" onClick={() => setShowSaveModal(false)}>√ó</button>
                                <h2 style={{marginBottom: '20px', color: '#333'}}>ÌåÄ Ï†ÄÏû•ÌïòÍ∏∞</h2>
                                <input
                                    type="text"
                                    placeholder="ÌåÄ Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"
                                    value={teamName}
                                    onChange={(e) => setTeamName(e.target.value)}
                                    onKeyPress={(e) => {
                                        if (e.key === 'Enter') {
                                            saveTeam();
                                        }
                                    }}
                                    autoFocus
                                />
                                <div className="save-modal-actions">
                                    <button 
                                        className="save-modal-btn save-modal-btn-secondary"
                                        onClick={() => {
                                            setShowSaveModal(false);
                                            setTeamName('');
                                        }}
                                    >
                                        Ï∑®ÏÜå
                                    </button>
                                    <button 
                                        className="save-modal-btn save-modal-btn-primary"
                                        onClick={saveTeam}
                                    >
                                        Ï†ÄÏû•
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {/* Load Team Modal */}
                    {showLoadModal && (
                        <div className="modal" onClick={() => setShowLoadModal(false)}>
                            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                                <button className="modal-close" onClick={() => setShowLoadModal(false)}>√ó</button>
                                <h2 style={{marginBottom: '20px', color: '#333'}}>Ï†ÄÏû•Îêú ÌåÄ Î∂àÎü¨Ïò§Í∏∞</h2>
                                {savedTeams.length === 0 ? (
                                    <p style={{textAlign: 'center', padding: '40px', color: '#999'}}>
                                        Ï†ÄÏû•Îêú ÌåÄÏù¥ ÏóÜÏäµÎãàÎã§.
                                    </p>
                                ) : (
                                    <div className="saved-teams-list">
                                        {savedTeams.map(savedTeam => (
                                            <div 
                                                key={savedTeam.id}
                                                className="saved-team-item"
                                                onClick={() => loadTeam(savedTeam)}
                                            >
                                                <div className="saved-team-info">
                                                    <div className="saved-team-name">{savedTeam.name}</div>
                                                    <div className="saved-team-date">{savedTeam.date}</div>
                                                    <div className="saved-team-pokemon">
                                                        {savedTeam.team.map((pokemon, idx) => (
                                                            <img 
                                                                key={idx}
                                                                src={getPokemonImageUrl(pokemon)} 
                                                                alt={pokemon.nameko || pokemon.name}
                                                                onError={(e) => {
                                                                    e.target.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.num}.png`;
                                                                }}
                                                            />
                                                        ))}
                                                    </div>
                                                </div>
                                                <div className="saved-team-actions">
                                                    <button 
                                                        className="delete-team-btn"
                                                        onClick={(e) => deleteTeam(savedTeam.id, e)}
                                                    >
                                                        ÏÇ≠Ï†ú
                                                    </button>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        function PokemonDetailModal({ pokemon, onClose, onAddToTeam, getPokemonImageUrl, pokemonDetails, movesData, itemsData, abilitiesData }) {
            const TYPE_COLORS = {
                'Normal': 'type-normal', 'Fighting': 'type-fighting', 'Flying': 'type-flying',
                'Poison': 'type-poison', 'Ground': 'type-ground', 'Rock': 'type-rock',
                'Bug': 'type-bug', 'Ghost': 'type-ghost', 'Steel': 'type-steel',
                'Fire': 'type-fire', 'Water': 'type-water', 'Grass': 'type-grass',
                'Electric': 'type-electric', 'Psychic': 'type-psychic', 'Ice': 'type-ice',
                'Dragon': 'type-dragon', 'Dark': 'type-dark', 'Fairy': 'type-fairy'
            };

            const TYPE_NAMES_KR = {
                'Normal': 'ÎÖ∏Îßê', 'Fighting': 'Í≤©Ìà¨', 'Flying': 'ÎπÑÌñâ',
                'Poison': 'ÎèÖ', 'Ground': 'ÎïÖ', 'Rock': 'Î∞îÏúÑ',
                'Bug': 'Î≤åÎ†à', 'Ghost': 'Í≥†Ïä§Ìä∏', 'Steel': 'Í∞ïÏ≤†',
                'Fire': 'Î∂àÍΩÉ', 'Water': 'Î¨º', 'Grass': 'ÌíÄ',
                'Electric': 'Ï†ÑÍ∏∞', 'Psychic': 'ÏóêÏä§Ìçº', 'Ice': 'ÏñºÏùå',
                'Dragon': 'ÎìúÎûòÍ≥§', 'Dark': 'ÏïÖ', 'Fairy': 'ÌéòÏñ¥Î¶¨'
            };

            const STAT_NAMES = {
                'hp': 'HP',
                'atk': 'Í≥µÍ≤©',
                'def': 'Î∞©Ïñ¥',
                'spa': 'ÌäπÏàòÍ≥µÍ≤©',
                'spd': 'ÌäπÏàòÎ∞©Ïñ¥',
                'spe': 'Ïä§ÌîºÎìú'
            };

            return (
                <div className="modal" onClick={onClose}>
                    <div className="modal-content" onClick={(e) => e.stopPropagation()}>
                        <button className="modal-close" onClick={onClose}>√ó</button>
                        
                        <div className="pokemon-detail">
                            <img 
                                src={getPokemonImageUrl(pokemon)} 
                                alt={pokemon.nameko || pokemon.name}
                                onError={(e) => {
                                    e.target.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.num}.png`;
                                }}
                            />
                            <h2>{pokemon.nameko || pokemon.name}</h2>
                            <p style={{color: '#999', marginBottom: '10px'}}>No. {pokemon.num}</p>
                            <div className="pokemon-types">
                                {pokemon.types?.map(type => (
                                    <span key={type} className={`type-badge ${TYPE_COLORS[type]}`}>
                                        {TYPE_NAMES_KR[type] || type}
                                    </span>
                                ))}
                            </div>

                            <div className="stats-section">
                                <h3>üìä Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞í</h3>
                                {pokemon.basestats && Object.entries(pokemon.basestats).map(([stat, value]) => (
                                    <div key={stat} className="stat-bar">
                                        <div className="stat-bar-label">
                                            <span>{STAT_NAMES[stat] || stat.toUpperCase()}</span>
                                            <span>{value}</span>
                                        </div>
                                        <div style={{background: '#e0e0e0', borderRadius: '10px'}}>
                                            <div 
                                                className="stat-bar-fill" 
                                                style={{width: `${Math.min(value / 255 * 100, 100)}%`}}
                                            >
                                                {value}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            {/* Hexagon Stat Chart with Recommended EVs */}
                            {pokemon.basestats && (() => {
                                const stats = pokemon.basestats;
                                const statOrder = ['hp', 'atk', 'def', 'spa', 'spd', 'spe'];
                                
                                // Ï∂îÏ≤ú ÎÖ∏Î†•Ïπò Í≥ÑÏÇ∞ (Í∏∞Î≥∏ Ïä§ÌÉØ Í∏∞Î∞ò, Îçî Ï†ïÌôïÌïú Î°úÏßÅ)
                                const calculateRecommendedEVs = (basestats) => {
                                    const evs = { hp: 0, atk: 0, def: 0, spa: 0, spd: 0, spe: 0 };
                                    
                                    // Í≥µÍ≤©Ìòï vs ÌäπÏàòÍ≥µÍ≤©Ìòï ÌåêÎã®
                                    const isPhysical = basestats.atk >= basestats.spa;
                                    const isSpecial = basestats.spa > basestats.atk;
                                    
                                    // Î∞©Ïñ¥Ìòï vs ÌäπÏàòÎ∞©Ïñ¥Ìòï ÌåêÎã®
                                    const isPhysicalDefense = basestats.def >= basestats.spd;
                                    const isSpecialDefense = basestats.spd > basestats.def;
                                    
                                    // Ïä§ÌîºÎìúÍ∞Ä ÎÜíÏúºÎ©¥ Ïä§ÌîºÎìúÌòï (80 Ïù¥ÏÉÅ)
                                    const isSpeed = basestats.spe >= 80;
                                    
                                    // Í≥µÍ≤©Î†•Ïù¥ ÎÜíÏùÄÏßÄ ÌåêÎã® (90 Ïù¥ÏÉÅ)
                                    const hasHighAttack = basestats.atk >= 90 || basestats.spa >= 90;
                                    // Î∞©Ïñ¥Î†•Ïù¥ ÎÜíÏùÄÏßÄ ÌåêÎã® (90 Ïù¥ÏÉÅ)
                                    const hasHighDefense = basestats.def >= 90 || basestats.spd >= 90;
                                    
                                    if (isSpeed && hasHighAttack) {
                                        // Ïä§ÌîºÎìú Í≥µÍ≤©Ìòï: Ïä§ÌîºÎìú 252 + Ï£º Í≥µÍ≤© 252 + HP 6
                                        evs.spe = 252;
                                        if (isPhysical) {
                                            evs.atk = 252;
                                        } else {
                                            evs.spa = 252;
                                        }
                                        evs.hp = 6;
                                    } else if (hasHighAttack && !hasHighDefense) {
                                        // Í≥µÍ≤©Ìòï: Ï£º Í≥µÍ≤© 252 + Ïä§ÌîºÎìú 252 + HP 6
                                        if (isPhysical) {
                                            evs.atk = 252;
                                        } else {
                                            evs.spa = 252;
                                        }
                                        evs.spe = 252;
                                        evs.hp = 6;
                                    } else if (hasHighDefense && !hasHighAttack) {
                                        // Î∞©Ïñ¥Ìòï: HP 252 + Ï£º Î∞©Ïñ¥ 252 + ÎÇòÎ®∏ÏßÄ 6
                                        evs.hp = 252;
                                        if (isPhysicalDefense) {
                                            evs.def = 252;
                                        } else {
                                            evs.spd = 252;
                                        }
                                        // ÎÇòÎ®∏ÏßÄ 6ÏùÄ Ïä§ÌîºÎìúÏóê Ìà¨Ïûê
                                        evs.spe = 6;
                                    } else if (hasHighDefense && hasHighAttack) {
                                        // Î∞∏Îü∞Ïä§Ìòï: HP 252 + Ï£º Í≥µÍ≤© 128 + Ï£º Î∞©Ïñ¥ 130
                                        evs.hp = 252;
                                        if (isPhysical) {
                                            evs.atk = 128;
                                        } else {
                                            evs.spa = 128;
                                        }
                                        if (isPhysicalDefense) {
                                            evs.def = 130;
                                        } else {
                                            evs.spd = 130;
                                        }
                                    } else {
                                        // ÏùºÎ∞òÌòï: HP 252 + Ï£º Í≥µÍ≤© 252 + Ïä§ÌîºÎìú 6
                                        evs.hp = 252;
                                        if (isPhysical) {
                                            evs.atk = 252;
                                        } else {
                                            evs.spa = 252;
                                        }
                                        evs.spe = 6;
                                    }
                                    
                                    // Ï¥ùÌï©Ïù¥ 510Ïù¥ ÎêòÎèÑÎ°ù Ï°∞Ï†ï
                                    const total = Object.values(evs).reduce((sum, val) => sum + val, 0);
                                    if (total !== 510) {
                                        // Î∂ÄÏ°±Ìïú Î∂ÄÎ∂ÑÏùÑ HPÏóê Ï∂îÍ∞Ä
                                        evs.hp += (510 - total);
                                    }
                                    
                                    return evs;
                                };
                                
                                const recommendedEVs = calculateRecommendedEVs(stats);
                                
                                // ÎÖ∏Î†•Ïπò Î∞òÏòÅ ÌõÑ ÏµúÏ¢Ö Ïä§ÌÉØ Í≥ÑÏÇ∞ (Î†àÎ≤® 50 Í∏∞Ï§Ä, Í∞úÏ≤¥Í∞í 31, ÏÑ±Í≤© Î≥¥Ï†ï ÏóÜÏùå)
                                const calculateFinalStats = (basestats, evs) => {
                                    const finalStats = {};
                                    statOrder.forEach(stat => {
                                        const base = basestats[stat] || 0;
                                        const ev = evs[stat] || 0;
                                        // Î†àÎ≤® 50 Í∏∞Ï§Ä Í≥µÏãù:
                                        // HP: ((Ï¢ÖÏ°±Í∞í √ó 2 + Í∞úÏ≤¥Í∞í 31 + ÎÖ∏Î†•Ïπò √∑ 4) √ó Î†àÎ≤® 50 √∑ 100) + Î†àÎ≤® 50 + 10
                                        // Í∏∞ÌÉÄ: ((Ï¢ÖÏ°±Í∞í √ó 2 + Í∞úÏ≤¥Í∞í 31 + ÎÖ∏Î†•Ïπò √∑ 4) √ó Î†àÎ≤® 50 √∑ 100) + 5
                                        const evBonus = Math.floor(ev / 4);
                                        const statValue = base * 2 + 31 + evBonus;
                                        
                                        if (stat === 'hp') {
                                            finalStats[stat] = Math.floor(statValue * 50 / 100) + 50 + 10;
                                        } else {
                                            finalStats[stat] = Math.floor(statValue * 50 / 100) + 5;
                                        }
                                    });
                                    return finalStats;
                                };
                                
                                const finalStats = calculateFinalStats(stats, recommendedEVs);
                                
                                const centerX = 175;
                                const centerY = 175;
                                const radius = 100;
                                
                                // ÏµúÎåÄÍ∞í Ï∞æÍ∏∞ (Ï†ïÍ∑úÌôîÏö© - ÏµúÏ¢Ö Ïä§ÌÉØ Í∏∞Ï§ÄÏúºÎ°ú ÌÜµÏùº, ÏµúÏÜå 200ÏúºÎ°ú ÏÑ§Ï†ï)
                                const maxStat = Math.max(
                                    Math.max(...Object.values(finalStats)), 
                                    Math.max(...Object.values(stats)),
                                    200
                                );
                                
                                // Í∞Å Îä•Î†•ÏπòÏùò Ï¢åÌëú Í≥ÑÏÇ∞
                                const getStatPoint = (index, value) => {
                                    const angle = (index * 60 - 90) * (Math.PI / 180);
                                    const normalizedValue = (value / maxStat) * radius;
                                    const x = centerX + normalizedValue * Math.cos(angle);
                                    const y = centerY + normalizedValue * Math.sin(angle);
                                    return { x, y, angle, value };
                                };
                                
                                // Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞íÍ≥º ÏµúÏ¢Ö Ïä§ÌÉØÏùÑ Í∞ôÏùÄ Ïä§ÏºÄÏùºÎ°ú ÎπÑÍµêÌïòÍ∏∞ ÏúÑÌï¥ ÌÜµÏùºÎêú ÏµúÎåÄÍ∞í ÏÇ¨Ïö©
                                // Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞í Ìè¨Ïù∏Ìä∏ (ÌÜµÏùºÎêú maxStat ÏÇ¨Ïö©)
                                const basePoints = statOrder.map((stat, index) => {
                                    const value = stats[stat] || 0;
                                    return getStatPoint(index, value);
                                });
                                
                                // ÎÖ∏Î†•Ïπò Î∞òÏòÅ ÌõÑ Ìè¨Ïù∏Ìä∏ (ÌÜµÏùºÎêú maxStat ÏÇ¨Ïö©)
                                const evPoints = statOrder.map((stat, index) => {
                                    const value = finalStats[stat] || 0;
                                    return getStatPoint(index, value);
                                });
                                
                                // Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞í Ïú°Í∞ÅÌòï Í≤ΩÎ°ú
                                const basePathData = basePoints.map((p, i) => 
                                    `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`
                                ).join(' ') + ' Z';
                                
                                // ÎÖ∏Î†•Ïπò Î∞òÏòÅ ÌõÑ Ïú°Í∞ÅÌòï Í≤ΩÎ°ú
                                const evPathData = evPoints.map((p, i) => 
                                    `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`
                                ).join(' ') + ' Z';
                                
                                // Í∑∏Î¶¨Îìú ÎùºÏù∏ ÏÉùÏÑ± (5Îã®Í≥Ñ)
                                const gridLines = [];
                                for (let i = 1; i <= 5; i++) {
                                    const gridRadius = (radius / 5) * i;
                                    const gridPoints = statOrder.map((stat, index) => {
                                        const angle = (index * 60 - 90) * (Math.PI / 180);
                                        const x = centerX + gridRadius * Math.cos(angle);
                                        const y = centerY + gridRadius * Math.sin(angle);
                                        return { x, y };
                                    });
                                    const gridPath = gridPoints.map((p, i) => 
                                        `${i === 0 ? 'M' : 'L'} ${p.x} ${p.y}`
                                    ).join(' ') + ' Z';
                                    gridLines.push(gridPath);
                                }
                                
                                // ÎùºÎ≤® ÏúÑÏπò Í≥ÑÏÇ∞ (Îçî Î∞ñÏúºÎ°ú)
                                const labelRadius = radius + 45;
                                const labelPoints = statOrder.map((stat, index) => {
                                    const angle = (index * 60 - 90) * (Math.PI / 180);
                                    const x = centerX + labelRadius * Math.cos(angle);
                                    const y = centerY + labelRadius * Math.sin(angle);
                                    return { x, y, stat, baseValue: stats[stat] || 0, evValue: recommendedEVs[stat] || 0, finalValue: finalStats[stat] || 0 };
                                });
                                
                                return (
                                    <div className="stats-section">
                                        <h3>‚≠ê Ï∂îÏ≤ú Í∞úÏ≤¥Í∞í (Ïú°Í∞ÅÌòï Í∑∏ÎûòÌîÑ)</h3>
                                        <div style={{marginBottom: '15px', padding: '15px', background: '#f8f9fa', borderRadius: '10px'}}>
                                            <h4 style={{marginBottom: '10px', color: '#333'}}>üí™ Ï∂îÏ≤ú ÎÖ∏Î†•Ïπò Î∂ÑÎ∞∞</h4>
                                            <div style={{display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '10px', fontSize: '14px'}}>
                                                {statOrder.map(stat => {
                                                    const ev = recommendedEVs[stat] || 0;
                                                    if (ev > 0) {
                                                        return (
                                                            <div key={stat} style={{display: 'flex', justifyContent: 'space-between', padding: '5px'}}>
                                                                <span>{STAT_NAMES[stat]}:</span>
                                                                <span style={{fontWeight: '700', color: '#667eea'}}>{ev}</span>
                                                            </div>
                                                        );
                                                    }
                                                    return null;
                                                }).filter(Boolean)}
                                            </div>
                                        </div>
                                        <div className="hexagon-chart-container">
                                            <div className="hexagon-chart">
                                                <svg viewBox="0 0 350 350" style={{overflow: 'visible'}} preserveAspectRatio="xMidYMid meet">
                                                    {/* Í∑∏Î¶¨Îìú ÎùºÏù∏ */}
                                                    {gridLines.map((path, i) => (
                                                        <path
                                                            key={i}
                                                            d={path}
                                                            className="hexagon-grid"
                                                        />
                                                    ))}
                                                    
                                                    {/* Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞í ÏòÅÏó≠ (Î≥¥ÎùºÏÉâ) */}
                                                    <path
                                                        d={basePathData}
                                                        className="hexagon-fill"
                                                    />
                                                    
                                                    {/* ÎÖ∏Î†•Ïπò Î∞òÏòÅ ÌõÑ ÏòÅÏó≠ (ÎÖ∏ÎûÄÏÉâ) */}
                                                    <path
                                                        d={evPathData}
                                                        fill="rgba(255, 193, 7, 0.3)"
                                                        stroke="#ffc107"
                                                        strokeWidth="2"
                                                        style={{transition: 'all 0.3s'}}
                                                    />
                                                    
                                                    {/* Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞í Ï†ê */}
                                                    {basePoints.map((point, i) => (
                                                        <circle
                                                            key={`base-${i}`}
                                                            cx={point.x}
                                                            cy={point.y}
                                                            className="hexagon-point"
                                                        />
                                                    ))}
                                                    
                                                    {/* ÎÖ∏Î†•Ïπò Î∞òÏòÅ ÌõÑ Ï†ê (ÎÖ∏ÎûÄÏÉâ) */}
                                                    {evPoints.map((point, i) => {
                                                        const ev = recommendedEVs[statOrder[i]] || 0;
                                                        if (ev > 0) {
                                                            return (
                                                                <circle
                                                                    key={`ev-${i}`}
                                                                    cx={point.x}
                                                                    cy={point.y}
                                                                    r="5"
                                                                    fill="#ffc107"
                                                                    stroke="#ff9800"
                                                                    strokeWidth="2"
                                                                />
                                                            );
                                                        }
                                                        return null;
                                                    }).filter(Boolean)}
                                                    
                                                    {/* ÎùºÎ≤® */}
                                                    {labelPoints.map((label, i) => {
                                                        const ev = recommendedEVs[label.stat] || 0;
                                                        // HPÎäî ÏúÑÏ™ΩÏóê ÏûàÏúºÎØÄÎ°ú y ÏúÑÏπò Ï°∞Ï†ï
                                                        const isTop = i === 0; // HP
                                                        const labelY = isTop ? label.y - 15 : label.y - 10;
                                                        const valueY = isTop ? label.y - 2 : label.y + 5;
                                                        const evY = isTop ? label.y + 8 : label.y + 18;
                                                        
                                                        return (
                                                            <g key={i}>
                                                                <text
                                                                    x={label.x}
                                                                    y={labelY}
                                                                    className="hexagon-label"
                                                                    style={{fontSize: isTop ? '11px' : '12px'}}
                                                                >
                                                                    {STAT_NAMES[label.stat] || label.stat.toUpperCase()}
                                                                </text>
                                                                <text
                                                                    x={label.x}
                                                                    y={valueY}
                                                                    className="hexagon-value"
                                                                >
                                                                    {label.baseValue}
                                                                </text>
                                                                {ev > 0 && (
                                                                    <text
                                                                        x={label.x}
                                                                        y={evY}
                                                                        style={{fontSize: '10px', fill: '#ffc107', fontWeight: '700'}}
                                                                        textAnchor="middle"
                                                                    >
                                                                        +{ev}EV
                                                                    </text>
                                                                )}
                                                            </g>
                                                        );
                                                    })}
                                                </svg>
                                            </div>
                                            <div style={{textAlign: 'center', marginTop: '15px', fontSize: '12px', color: '#666'}}>
                                                <div style={{display: 'inline-flex', alignItems: 'center', gap: '10px', marginRight: '20px'}}>
                                                    <div style={{width: '15px', height: '15px', background: 'rgba(102, 126, 234, 0.3)', border: '2px solid #667eea', borderRadius: '3px'}}></div>
                                                    <span>Í∏∞Î≥∏ Ï¢ÖÏ°±Í∞í</span>
                                                </div>
                                                <div style={{display: 'inline-flex', alignItems: 'center', gap: '10px'}}>
                                                    <div style={{width: '15px', height: '15px', background: 'rgba(255, 193, 7, 0.3)', border: '2px solid #ffc107', borderRadius: '3px'}}></div>
                                                    <span>ÎÖ∏Î†•Ïπò Î∞òÏòÅ ÌõÑ</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                );
                            })()}

                            {pokemon.abilities && (
                                <div className="moves-section">
                                    <h3>‚ú® ÌäπÏÑ±</h3>
                                    <div style={{display: 'flex', flexDirection: 'column', gap: '10px'}}>
                                        {Object.entries(pokemon.abilities).map(([key, abilityName]) => {
                                            // abilitiesDataÏóêÏÑú ÌäπÏÑ± Ï†ïÎ≥¥ Ï∞æÍ∏∞
                                            const abilityInfo = abilitiesData.find(a => 
                                                a.name === abilityName || a.nameko === abilityName
                                            );
                                            const displayName = abilityInfo?.nameko || abilityName;
                                            const description = abilityInfo?.desc || abilityInfo?.shortdesc || '';
                                            
                                            return (
                                                <div key={key} style={{background: '#f8f9fa', padding: '12px', borderRadius: '10px'}}>
                                                    <div style={{fontWeight: '700', fontSize: '16px'}}>
                                                        {displayName} {key === 'H' ? '(Ïà®Í≤®ÏßÑ ÌäπÏÑ±)' : ''}
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}

                            <RecommendedMoves 
                                pokemon={pokemon}
                                pokemonDetails={pokemonDetails}
                                movesData={movesData}
                            />

                            <RecommendedItems 
                                pokemon={pokemon}
                                pokemonDetails={pokemonDetails}
                                itemsData={itemsData}
                            />

                            <button className="add-to-team-btn" onClick={() => onAddToTeam(pokemon)}>
                                ÌåÄÏóê Ï∂îÍ∞ÄÌïòÍ∏∞
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function RecommendedMoves({ pokemon, pokemonDetails, movesData }) {
            const TYPE_COLORS = {
                'Normal': 'type-normal', 'Fighting': 'type-fighting', 'Flying': 'type-flying',
                'Poison': 'type-poison', 'Ground': 'type-ground', 'Rock': 'type-rock',
                'Bug': 'type-bug', 'Ghost': 'type-ghost', 'Steel': 'type-steel',
                'Fire': 'type-fire', 'Water': 'type-water', 'Grass': 'type-grass',
                'Electric': 'type-electric', 'Psychic': 'type-psychic', 'Ice': 'type-ice',
                'Dragon': 'type-dragon', 'Dark': 'type-dark', 'Fairy': 'type-fairy'
            };

            const TYPE_NAMES_KR = {
                'Normal': 'ÎÖ∏Îßê', 'Fighting': 'Í≤©Ìà¨', 'Flying': 'ÎπÑÌñâ',
                'Poison': 'ÎèÖ', 'Ground': 'ÎïÖ', 'Rock': 'Î∞îÏúÑ',
                'Bug': 'Î≤åÎ†à', 'Ghost': 'Í≥†Ïä§Ìä∏', 'Steel': 'Í∞ïÏ≤†',
                'Fire': 'Î∂àÍΩÉ', 'Water': 'Î¨º', 'Grass': 'ÌíÄ',
                'Electric': 'Ï†ÑÍ∏∞', 'Psychic': 'ÏóêÏä§Ìçº', 'Ice': 'ÏñºÏùå',
                'Dragon': 'ÎìúÎûòÍ≥§', 'Dark': 'ÏïÖ', 'Fairy': 'ÌéòÏñ¥Î¶¨'
            };

            if (!pokemonDetails || !movesData || movesData.length === 0) {
                return (
                    <div className="moves-section">
                        <h3>‚öîÔ∏è Ï∂îÏ≤ú Í∏∞Ïà†</h3>
                        <p style={{color: '#666'}}>Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                );
            }

            const pokemonNum = pokemon.num?.toString();
            const pokemonForm = pokemon.forme || 0;
            const pokemonData = pokemonDetails[pokemonNum]?.[pokemonForm]?.temoti;

            if (!pokemonData || !pokemonData.waza || pokemonData.waza.length === 0) {
                return (
                    <div className="moves-section">
                        <h3>‚öîÔ∏è Ï∂îÏ≤ú Í∏∞Ïà†</h3>
                        <p style={{color: '#666'}}>Ïù¥ Ìè¨ÏºìÎ™¨Ïùò Ï∂îÏ≤ú Í∏∞Ïà† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                );
            }

            // ÏÉÅÏúÑ 10Í∞ú Í∏∞Ïà†Îßå ÌëúÏãú
            const topMoves = pokemonData.waza.slice(0, 10).map(moveInfo => {
                const move = movesData.find(m => m.num?.toString() === moveInfo.id.toString());
                return {
                    ...moveInfo,
                    move: move
                };
            }).filter(m => m.move); // Í∏∞Ïà† Ï†ïÎ≥¥Í∞Ä ÏûàÎäî Í≤ÉÎßå

            if (topMoves.length === 0) {
                return (
                    <div className="moves-section">
                        <h3>‚öîÔ∏è Ï∂îÏ≤ú Í∏∞Ïà†</h3>
                        <p style={{color: '#666'}}>Ï∂îÏ≤ú Í∏∞Ïà† Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                );
            }

            return (
                <div className="moves-section">
                    <h3>‚öîÔ∏è Ï∂îÏ≤ú Í∏∞Ïà† (ÏÇ¨Ïö©Î•† Í∏∞Ï§Ä)</h3>
                    <div className="moves-grid">
                        {topMoves.map((moveInfo, index) => (
                            <div key={index} className="move-item" style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                                <div>
                                    <div style={{fontWeight: '700', marginBottom: '3px'}}>
                                        {moveInfo.move.nameko || moveInfo.move.name}
                                    </div>
                                    <div style={{fontSize: '12px', color: '#666'}}>
                                        {moveInfo.move.type && (
                                            <span className={`type-badge ${TYPE_COLORS[moveInfo.move.type]}`} style={{fontSize: '10px', padding: '2px 6px'}}>
                                                {TYPE_NAMES_KR[moveInfo.move.type] || moveInfo.move.type}
                                            </span>
                                        )}
                                        {moveInfo.move.basepower && moveInfo.move.basepower > 0 && ` | ÏúÑÎ†•: ${moveInfo.move.basepower}`}
                                    </div>
                                </div>
                                <div style={{fontSize: '14px', fontWeight: '700', color: '#667eea'}}>
                                    {parseFloat(moveInfo.val).toFixed(1)}%
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        function RecommendedItems({ pokemon, pokemonDetails, itemsData }) {
            if (!pokemonDetails || !itemsData || itemsData.length === 0) {
                return (
                    <div className="items-section">
                        <h3>üéí Ï∂îÏ≤ú ÏßÄÎãå ÎèÑÍµ¨</h3>
                        <p style={{color: '#666'}}>Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                );
            }

            const pokemonNum = pokemon.num?.toString();
            const pokemonForm = pokemon.forme || 0;
            const pokemonData = pokemonDetails[pokemonNum]?.[pokemonForm]?.temoti;

            if (!pokemonData || !pokemonData.motimono || pokemonData.motimono.length === 0) {
                return (
                    <div className="items-section">
                        <h3>üéí Ï∂îÏ≤ú ÏßÄÎãå ÎèÑÍµ¨</h3>
                        <p style={{color: '#666'}}>Ïù¥ Ìè¨ÏºìÎ™¨Ïùò Ï∂îÏ≤ú ÎèÑÍµ¨ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                );
            }

            // ÏÉÅÏúÑ 5Í∞ú ÎèÑÍµ¨Îßå ÌëúÏãú
            const topItems = pokemonData.motimono.slice(0, 5).map(itemInfo => {
                const item = itemsData.find(i => i.num?.toString() === itemInfo.id.toString());
                return {
                    ...itemInfo,
                    item: item
                };
            }).filter(i => i.item); // ÎèÑÍµ¨ Ï†ïÎ≥¥Í∞Ä ÏûàÎäî Í≤ÉÎßå

            if (topItems.length === 0) {
                return (
                    <div className="items-section">
                        <h3>üéí Ï∂îÏ≤ú ÏßÄÎãå ÎèÑÍµ¨</h3>
                        <p style={{color: '#666'}}>Ï∂îÏ≤ú ÎèÑÍµ¨ Ï†ïÎ≥¥Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.</p>
                    </div>
                );
            }

            return (
                <div className="items-section">
                    <h3>üéí Ï∂îÏ≤ú ÏßÄÎãå ÎèÑÍµ¨ (ÏÇ¨Ïö©Î•† Í∏∞Ï§Ä)</h3>
                    <div className="items-grid">
                        {topItems.map((itemInfo, index) => {
                            // ÎèÑÍµ¨ Ïù¥ÎØ∏ÏßÄ URL ÏÉùÏÑ±
                            const getItemImageUrl = (item) => {
                                if (!item) return '';
                                
                                // PokeAPI ÏïÑÏù¥ÌÖú Ïù¥ÎØ∏ÏßÄ URL ÌòïÏãù
                                // Î∞©Î≤ï 1: index ÌïÑÎìú ÏÇ¨Ïö© (Í∞ÄÏû• Ï†ïÌôï)
                                if (item.index) {
                                    // indexÎ•º Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö© (Ïòà: "leftovers", "life-orb" Îì±)
                                    return `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/${item.index}.png`;
                                }
                                
                                // Î∞©Î≤ï 2: nameÏùÑ Í∏∞Î∞òÏúºÎ°ú Î≥ÄÌôò
                                if (item.name) {
                                    // PokeAPI ÌòïÏãùÏóê ÎßûÍ≤å Î≥ÄÌôò
                                    let itemName = item.name
                                        .toLowerCase()
                                        .replace(/\s+/g, '-')
                                        .replace(/[^a-z0-9-]/g, '')
                                        .replace(/-+/g, '-')
                                        .replace(/^-|-$/g, '');
                                    
                                    // ÌäπÏàò ÏºÄÏù¥Ïä§ Ï≤òÎ¶¨
                                    itemName = itemName
                                        .replace(/['"]/g, '')
                                        .replace(/\./g, '')
                                        .replace(/&/g, 'and');
                                    
                                    return `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/${itemName}.png`;
                                }
                                
                                return 'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png';
                            };
                            
                            return (
                                <div key={index} className="item-item" style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', gap: '10px'}}>
                                    <div style={{display: 'flex', alignItems: 'center', gap: '10px', flex: 1}}>
                                        <img 
                                            src={getItemImageUrl(itemInfo.item)} 
                                            alt={itemInfo.item.nameko || itemInfo.item.name}
                                            style={{width: '40px', height: '40px', objectFit: 'contain', flexShrink: 0}}
                                            onError={(e) => {
                                                // Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ïã§Ìå® Ïãú Ïó¨Îü¨ Î∞©Î≤ï ÏãúÎèÑ
                                                const item = itemInfo.item;
                                                const img = e.target;
                                                
                                                // Ïû¨ÏãúÎèÑ ÌöüÏàò ÌôïÏù∏ (Î¨¥Ìïú Î£®ÌîÑ Î∞©ÏßÄ)
                                                if (!img.dataset.retryCount) {
                                                    img.dataset.retryCount = '0';
                                                }
                                                const retryCount = parseInt(img.dataset.retryCount);
                                                
                                                if (retryCount === 0 && item.index) {
                                                    // Ï≤´ Î≤àÏß∏ Ïû¨ÏãúÎèÑ: indexÎ°ú Îã§Ïãú ÏãúÎèÑ
                                                    img.dataset.retryCount = '1';
                                                    img.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/${item.index}.png`;
                                                } else if (retryCount <= 1 && item.name) {
                                                    // Îëê Î≤àÏß∏ Ïû¨ÏãúÎèÑ: name Í∏∞Î∞ò Î≥ÄÌôò
                                                    img.dataset.retryCount = '2';
                                                    const itemName = item.name.toLowerCase()
                                                        .replace(/\s+/g, '-')
                                                        .replace(/[^a-z0-9-]/g, '')
                                                        .replace(/&/g, 'and');
                                                    img.src = `https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/${itemName}.png`;
                                                } else {
                                                    // ÏµúÏ¢Ö Ïã§Ìå®: Í∏∞Î≥∏ Ïù¥ÎØ∏ÏßÄ ÏÇ¨Ïö©
                                                    img.src = 'https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png';
                                                }
                                            }}
                                        />
                                        <div>
                                            <div style={{fontWeight: '700'}}>
                                                {itemInfo.item.nameko || itemInfo.item.name}
                                            </div>
                                        </div>
                                    </div>
                                    <div style={{fontSize: '14px', fontWeight: '700', color: '#667eea', marginLeft: '10px', flexShrink: 0}}>
                                        {parseFloat(itemInfo.val).toFixed(1)}%
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<TeamBuilder />, document.getElementById('root'));
    </script>
</body>
</html>
